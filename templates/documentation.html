{% extends "base.html" %}
{% block title %}Documentation{% endblock %}

{% block head %}
<style>
.doc-preview {
    margin: 16px 0;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    overflow: hidden;
    background: #f5f5f5;
}

.doc-preview object,
.doc-preview iframe {
    display: block;
    width: 100%;
    min-height: 400px;
}

.doc-card {
    display: flex;
    flex-direction: column;
}

.doc-card-header {
    margin-bottom: 12px;
}
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title">
        <h1>Documentation</h1>
        <p>Guides Front & Back, RJ et automatisation</p>
    </div>
</div>

<div class="doc-grid">
    {% for doc in docs %}
    <div class="doc-card">
        <div class="doc-card-header">
            <div class="doc-card-icon"><i data-feather="book"></i></div>
            <div>
                <h2>{{ doc.title }}</h2>
                <p>{{ doc.description }}</p>
            </div>
        </div>

        <!-- PDF Preview -->
        <div class="doc-preview">
            <object data="{{ url_for('checklist.documentation_file', filename=doc.path) }}#page=1&view=FitH"
                    type="application/pdf"
                    width="100%"
                    height="400px">
                <iframe src="{{ url_for('checklist.documentation_file', filename=doc.path) }}#page=1&view=FitH"
                        width="100%"
                        height="400px"
                        style="border: 1px solid #ddd; border-radius: 8px;">
                    <p style="padding: 20px; text-align: center; color: #666;">
                        Aperçu non disponible. Cliquez sur "Voir" pour ouvrir le document.
                    </p>
                </iframe>
            </object>
        </div>

        <div class="doc-actions">
            <a class="btn" href="{{ url_for('checklist.documentation_view', filename=doc.path) }}">
                <i data-feather="eye"></i> Voir
            </a>
            <a class="btn btn-secondary" href="{{ url_for('checklist.documentation_file', filename=doc.path) }}" target="_blank" rel="noopener">
                <i data-feather="download"></i> Télécharger
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
<script>
    feather.replace();
</script>
{% endblock %}

{% extends "base.html" %}
{% block title %}Document{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title">
        <h1>Document</h1>
        <p>{{ filename }}</p>
    </div>
    <div class="page-actions">
        <a class="btn" href="{{ download_url }}" download>
            <i data-feather="download"></i> Télécharger
        </a>
        <a class="btn btn-secondary" href="{{ download_url }}" target="_blank" rel="noopener">
            <i data-feather="external-link"></i> Ouvrir brut
        </a>
    </div>
</div>

{% if is_pdf %}
    <div class="doc-viewer-pdf">
        <object data="{{ download_url }}" type="application/pdf" width="100%" height="900px">
            <iframe src="{{ download_url }}" width="100%" height="900px" style="border: none;">
                <p>Votre navigateur ne peut pas afficher le PDF. Utilisez le bouton Télécharger.</p>
            </iframe>
        </object>
    </div>
{% elif parsed and content_html %}
    <div class="doc-viewer">
        {{ content_html|safe }}
    </div>
{% else %}
    <div class="alert">
        Prévisualisation non disponible pour ce format. Vous pouvez ouvrir ou télécharger le fichier.
    </div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>feather.replace();</script>
{% endblock %}
